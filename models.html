<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>モデルラインナップ - JCFS</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&family=Roboto:wght@700&display=swap" rel="stylesheet">
  <style>
    body{font-family:'Noto Sans JP','Inter',sans-serif;background:#f8fafc}
    .jcfs-blue-dark{color:#002D4F}.jcfs-blue-primary{color:#005A9C}
    .bg-jcfs-blue-dark{background:#002D4F}.bg-jcfs-blue-primary{background:#005A9C}
    .lang-btn{padding:.5rem 1rem;border-radius:.375rem;font-weight:600;transition:.2s}
    .lang-btn.active{background:#005A9C;color:#fff}.lang-btn:not(.active){background:#e5e7eb;color:#4b5563}
    /* 画像のアスペクト比をそろえる */
    .thumb{aspect-ratio:16/9;object-fit:cover}
    /* カードのホバー */
    .card{transition:transform .2s, box-shadow .2s}
    .card:hover{transform:translateY(-2px);box-shadow:0 12px 24px -12px rgba(0,0,0,.25)}
    /* CTA */
    .cta{position:relative;overflow:hidden}
    .cta::after{content:'→';position:absolute;right:1rem;top:50%;transform:translateY(-50%);font-weight:900}
  </style>
</head>
<body class="text-gray-800">

  <!-- Header -->
  <header class="bg-white shadow-md sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
      <a href="https://sasuraimitsu.github.io/JCFS/" id="nav-home" class="text-2xl font-bold jcfs-blue-dark">JCFS</a>
      <div class="flex items-center gap-2">
        <button id="lang-ja" class="lang-btn">JP</button>
        <button id="lang-en" class="lang-btn">EN</button>
      </div>
    </div>
  </header>

  <main class="max-w-7xl mx-auto px-4 py-10">
    <div class="text-center mb-10">
      <h1 id="page-title" class="text-4xl md:text-5xl font-bold jcfs-blue-dark mb-3"></h1>
      <p id="page-subtitle" class="text-lg md:text-xl text-gray-600"></p>
    </div>

    <!-- Cards -->
    <div id="cards" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
  </main>

  <!-- Modal (coming soon) -->
  <div id="coming-soon" class="fixed inset-0 bg-black/50 hidden items-center justify-center p-4 z-50">
    <div class="bg-white max-w-sm w-full rounded-lg p-6 text-center">
      <h3 id="modal-title" class="text-2xl font-bold jcfs-blue-dark mb-2"></h3>
      <p id="modal-desc" class="text-gray-700 mb-6"></p>
      <button id="modal-close" class="bg-jcfs-blue-primary text-white font-bold px-6 py-2 rounded-lg">OK</button>
    </div>
  </div>

  <script>
  // =======================
  // 1) 文言（多言語）
  // =======================
  const i18n = {
    ja: {
      title: "導入モデルラインナップ",
      subtitle: "現在準備中の船から順次公開します。各カードの「詳細を見る」から個別ページへ移動できます。",
      seeDetail: "詳細を見る",
      comingTitle: "準備中",
      comingDesc: "このモデルの詳細ページは準備中です。公開まで今しばらくお待ちください。"
    },
    en: {
      title: "Model Lineup",
      subtitle: "We will publish each boat page as it becomes ready. Click “View details” on a card to open the individual page.",
      seeDetail: "View details",
      comingTitle: "Coming Soon",
      comingDesc: "The detail page for this model is under construction. Please check back soon."
    }
  };

  // =======================
  // 2) データ（ここを増やすだけ）
  // =======================
  const models = [
    {
      id: "bingo",                    // 詳細ページ: model-bingo.html
      nameJa: "敏五丸",
      nameEn: "Bingo-maru",
      hero: "assets/boats/bingo/01.jpg",   // サムネイル（なければ自動でプレースホルダ）
      tagsJa: ["FRP", "沿岸", "実証船"],
      tagsEn: ["FRP", "Coastal", "Pilot"],
      // comingSoon: true にすると「準備中」モーダルで止める
      comingSoon: false
    },
    // 追加例:
    // {
    //   id: "example",
    //   nameJa: "○○丸",
    //   nameEn: "Example-maru",
    //   hero: "assets/boats/example/01.jpg",
    //   tagsJa: ["FRP","～用途～"],
    //   tagsEn: ["FRP","Use case"],
    //   comingSoon: true
    // },
  ];

  // =======================
  // 3) 言語の決定
  // =======================
  function getInitialLang() {
    const url = new URLSearchParams(location.search).get("lang");
    const store = localStorage.getItem("siteLang");
    const nav = (navigator.language || "en").toLowerCase().startsWith("ja") ? "ja":"en";
    return (url==="ja"||url==="en") ? url : (store || nav);
  }
  function setLang(lang, {persist=true, updateUrl=true}={}) {
    document.documentElement.lang = lang;
    document.getElementById("lang-ja").classList.toggle("active", lang==="ja");
    document.getElementById("lang-en").classList.toggle("active", lang==="en");

    const t = i18n[lang];
    document.getElementById("page-title").textContent = t.title;
    document.getElementById("page-subtitle").textContent = t.subtitle;

    if (persist) localStorage.setItem("siteLang", lang);
    if (updateUrl) {
      const p = new URLSearchParams(location.search);
      p.set("lang", lang);
      history.replaceState(null, "", `${location.pathname}?${p}`);
    }

    // ホームリンクも言語維持
    const home = document.getElementById("nav-home");
    if (home) home.href = `https://sasuraimitsu.github.io/JCFS/?lang=${lang}`;

    renderCards(lang);
  }

  // =======================
  // 4) カード表示
  // =======================
  function renderCards(lang){
    const t = i18n[lang];
    const box = document.getElementById("cards");
    box.innerHTML = "";

    models.forEach(m => {
      const name = lang==="ja" ? m.nameJa : (m.nameEn || m.nameJa);
      const tags = (lang==="ja" ? m.tagsJa : m.tagsEn) || [];
      const img = m.hero || "data:image/svg+xml;utf8," + encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' width='800' height='450'><rect width='100%' height='100%' fill='%23e5e7eb'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' fill='%236b7280' font-size='24'>No Image</text></svg>`);

      const card = document.createElement("article");
      card.className = "card bg-white rounded-xl overflow-hidden border border-gray-200";
      card.innerHTML = `
        <img src="${img}" alt="${name}" class="thumb w-full">
        <div class="p-4 space-y-3">
          <h3 class="text-xl font-bold jcfs-blue-dark">${name}</h3>
          ${tags.length ? `<div class="flex flex-wrap gap-2">${tags.map(tag=>`<span class="text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded-full">${tag}</span>`).join("")}</div>`:""}
          <a href="${m.comingSoon ? 'javascript:void(0);' : `model-${m.id}.html?lang=${lang}`}"
             data-mode="${m.comingSoon ? 'modal' : ''}"
             class="cta block w-full text-center bg-gradient-to-r from-[#0e4aa6] via-[#005A9C] to-[#002D4F] text-white font-extrabold py-3 rounded-lg">
             ${t.seeDetail}
          </a>
        </div>
      `;
      box.appendChild(card);
    });

    // 「準備中」モーダル
    const modal = document.getElementById("coming-soon");
    const openers = document.querySelectorAll('a[data-mode="modal"]');
    openers.forEach(a=>{
      a.addEventListener("click", (e)=>{
        e.preventDefault();
        document.getElementById("modal-title").textContent = i18n[lang].comingTitle;
        document.getElementById("modal-desc").textContent  = i18n[lang].comingDesc;
        modal.classList.remove("hidden");
        modal.classList.add("flex");
      });
    });
  }

  // =======================
  // 5) 起動
  // =======================
  document.getElementById("lang-ja").addEventListener("click", ()=>setLang("ja"));
  document.getElementById("lang-en").addEventListener("click", ()=>setLang("en"));
  document.getElementById("modal-close").addEventListener("click", ()=>{
    const m = document.getElementById("coming-soon");
    m.classList.add("hidden"); m.classList.remove("flex");
  });
  document.getElementById("coming-soon").addEventListener("click", (e)=>{
    if(e.target.id==="coming-soon"){ e.currentTarget.classList.add("hidden"); e.currentTarget.classList.remove("flex"); }
  });

  const initLang = getInitialLang();
  setLang(initLang,{persist:true,updateUrl:true});
  </script>
</body>
</html>
