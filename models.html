<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>モデル一覧 - JCFS</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Noto Sans JP', system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }
    .jcfs-blue-dark { color:#002D4F } .jcfs-blue-primary{ color:#005A9C }
    .bg-jcfs-blue-dark{ background:#002D4F } .bg-jcfs-blue-primary{ background:#005A9C }
  </style>
</head>
<body class="bg-gray-100 text-gray-800">

  <!-- Header -->
  <header class="bg-white shadow sticky top-0 z-40">
    <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
      <a id="nav-home" href="index.html" class="text-2xl font-bold jcfs-blue-dark">JCFS</a>
      <div class="flex items-center gap-2">
        <button id="lang-ja" class="px-3 py-1.5 rounded bg-gray-200 font-semibold">JP</button>
        <button id="lang-en" class="px-3 py-1.5 rounded bg-gray-200 font-semibold">EN</button>
      </div>
    </div>
  </header>

  <main class="max-w-7xl mx-auto px-4 md:px-6 py-8">
    <h1 id="page-title" class="text-3xl md:text-4xl font-bold jcfs-blue-dark mb-2"></h1>
    <p id="page-desc" class="text-lg text-gray-600 mb-8"></p>

    <!-- スマホ：カード表示 -->
    <div id="cards" class="grid gap-6 md:hidden"></div>

    <!-- PC：テーブル表示 -->
    <div class="hidden md:block bg-white rounded-lg shadow">
      <div class="overflow-x-auto">
        <table class="w-full text-left">
          <thead class="bg-jcfs-blue-primary text-white">
            <tr>
              <th class="px-4 py-3 w-[120px]" id="th-photo"></th>
              <th class="px-4 py-3" id="th-name"></th>
              <th class="px-4 py-3" id="th-size"></th>
              <th class="px-4 py-3" id="th-engine"></th>
              <th class="px-4 py-3" id="th-equip"></th>
              <th class="px-4 py-3 w-[120px]"></th>
            </tr>
          </thead>
          <tbody id="rows"></tbody>
        </table>
      </div>
    </div>
  </main>

  <footer class="bg-white mt-12 py-6">
    <p class="text-center text-gray-500 text-sm">&copy; 2024 JCFS. All Rights Reserved.</p>
  </footer>

  <script>
    // ===== 言語テキスト =====
    const I18N = {
      ja: {
        pageTitle: "モデル一覧",
        pageDesc: "カンボジアの漁業スタイルに合わせたFRP船モデルの一覧です。各モデルの詳細ページでは、写真・仕様・装備をより詳しくご覧いただけます。",
        thPhoto: "写真",
        thName: "船名",
        thSize: "サイズ",
        thEngine: "エンジン",
        thEquip: "装備品",
        seeDetail: "詳細を見る"
      },
      en: {
        pageTitle: "Model Lineup",
        pageDesc: "A lineup of FRP fishing vessels tailored to Cambodian fisheries. See each detail page for photos, specifications, and equipment.",
        thPhoto: "Photo",
        thName: "Vessel",
        thSize: "Size",
        thEngine: "Engine",
        thEquip: "Equipment",
        seeDetail: "View details"
      }
    };

    // ===== 一覧データ（ここに増やすだけ！）=====
    // 画像パスはご自身の配置に合わせて変更してください。
    const SHIPS = [
      {
        id: "toshigomaru",
        name_ja: "敏五丸",
        name_en: "Toshigomaru",
        // 表示用の簡易まとめ文字列。詳細ページはもっと詳細に。
        size_ja: "総トン数: 4.9t / 全長: 約11.0m / 幅: 約2.8m",
        size_en: "GT: 4.9t / LOA: ~11.0 m / Beam: ~2.8 m",
        engine_ja: "ヤンマー ディーゼル（例）150–300HP 級",
        engine_en: "YANMAR Diesel (example) 150–300 HP class",
        equip_ja: ["イケス", "魚群探知機", "GPS", "ウインチ"],
        equip_en: ["Fish tank", "Fish finder", "GPS", "Winch"],
        thumb: "assets/boats/toshigomaru/01.jpg",   // ←サムネ画像
        detailUrl: "model-toshigomaru.html"            // ←詳細ページへのリンク
      }
      // 追加例：
      // ,{
      //   id: "xxx",
      //   name_ja: "〇〇丸",
      //   name_en: "Sample Maru",
      //   size_ja: "総トン数: x.xt / 全長: xx.xm / 幅: xx.xm",
      //   size_en: "GT: x.xt / LOA: xx.x m / Beam: xx.x m",
      //   engine_ja: "エンジン名・出力",
      //   engine_en: "Engine & output",
      //   equip_ja: ["装備A", "装備B"],
      //   equip_en: ["Equip A", "Equip B"],
      //   thumb: "assets/models/xxx/thumb.jpg",
      //   detailUrl: "models/xxx.html"
      // }
    ];

    // ===== 言語選択（?lang= > localStorage > ブラウザ）=====
    function getInitialLang() {
      const qp = new URLSearchParams(location.search).get("lang");
      if (qp === "ja" || qp === "en") return qp;
      const ls = localStorage.getItem("siteLang");
      if (ls === "ja" || ls === "en") return ls;
      return (navigator.language || "en").toLowerCase().startsWith("ja") ? "ja" : "en";
    }

    function setLang(lang, {persist=true, updateUrl=true}={}) {
      const t = I18N[lang] || I18N.ja;
      document.documentElement.lang = lang;
      // ヘッダのホームリンクに ?lang を付与
      const home = document.getElementById("nav-home");
      if (home) {
        const path = home.getAttribute("href") || "index.html";
        const u = new URL(path, location.origin);
        u.searchParams.set("lang", lang);
        home.setAttribute("href", u.pathname + u.search);
      }
      // 表示更新
      document.getElementById("page-title").textContent = t.pageTitle;
      document.getElementById("page-desc").textContent = t.pageDesc;
      document.getElementById("th-photo").textContent = t.thPhoto;
      document.getElementById("th-name").textContent  = t.thName;
      document.getElementById("th-size").textContent  = t.thSize;
      document.getElementById("th-engine").textContent= t.thEngine;
      document.getElementById("th-equip").textContent = t.thEquip;

      // ボタンのアクティブ表示
      document.getElementById("lang-ja").classList.toggle("bg-jcfs-blue-primary", lang === "ja");
      document.getElementById("lang-ja").classList.toggle("text-white", lang === "ja");
      document.getElementById("lang-en").classList.toggle("bg-jcfs-blue-primary", lang === "en");
      document.getElementById("lang-en").classList.toggle("text-white", lang === "en");

      renderList(lang);

      if (persist) localStorage.setItem("siteLang", lang);
      if (updateUrl) {
        const p = new URLSearchParams(location.search);
        p.set("lang", lang);
        history.replaceState(null, "", location.pathname + "?" + p.toString());
      }
    }

    // ===== 一覧描画 =====
    function renderList(lang="ja") {
      const t = I18N[lang] || I18N.ja;

      // カード（スマホ）
      const cards = document.getElementById("cards");
      cards.innerHTML = "";
      SHIPS.forEach(v => {
        const name = (lang === "en" ? v.name_en : v.name_ja) || v.name_ja;
        const size = (lang === "en" ? v.size_en : v.size_ja) || v.size_ja;
        const eng  = (lang === "en" ? v.engine_en : v.engine_ja) || v.engine_ja;
        const eq   = (lang === "en" ? v.equip_en  : v.equip_ja)  || v.equip_ja;
        const detailUrl = appendLang(v.detailUrl, lang);

        const card = document.createElement("div");
        card.className = "bg-white rounded-lg shadow overflow-hidden";

        card.innerHTML = `
          <img src="${v.thumb}" alt="${name} thumbnail" class="w-full h-48 object-cover">
          <div class="p-4 space-y-2">
            <h3 class="text-xl font-bold jcfs-blue-dark">${name}</h3>
            <p class="text-sm text-gray-500">${size}</p>
            <p class="text-sm"><span class="font-semibold">${t.thEngine}:</span> ${eng}</p>
            <p class="text-sm"><span class="font-semibold">${t.thEquip}:</span> ${eq.join(" / ")}</p>
            <div class="pt-2">
              <a href="${detailUrl}"
                 class="inline-flex items-center px-4 py-2 rounded-lg text-white bg-gradient-to-r from-[#0e4aa6] via-[#005A9C] to-[#002D4F] font-bold">
                ${t.seeDetail}
              </a>
            </div>
          </div>
        `;
        cards.appendChild(card);
      });

      // テーブル（PC）
      const rows = document.getElementById("rows");
      rows.innerHTML = "";
      SHIPS.forEach(v => {
        const name = (lang === "en" ? v.name_en : v.name_ja) || v.name_ja;
        const size = (lang === "en" ? v.size_en : v.size_ja) || v.size_ja;
        const eng  = (lang === "en" ? v.engine_en : v.engine_ja) || v.engine_ja;
        const eq   = (lang === "en" ? v.equip_en  : v.equip_ja)  || v.equip_ja;
        const detailUrl = appendLang(v.detailUrl, lang);

        const tr = document.createElement("tr");
        tr.className = "border-b hover:bg-gray-50";
        tr.innerHTML = `
          <td class="px-4 py-2">
            <img src="${v.thumb}" alt="${name} thumbnail" class="w-24 h-16 object-cover rounded">
          </td>
          <td class="px-4 py-2 font-semibold">${name}</td>
          <td class="px-4 py-2 text-sm text-gray-700">${size}</td>
          <td class="px-4 py-2 text-sm text-gray-700">${eng}</td>
          <td class="px-4 py-2 text-sm text-gray-700">${eq.join(" / ")}</td>
          <td class="px-4 py-2">
            <a href="${detailUrl}"
               class="inline-flex items-center px-3 py-2 rounded-lg text-white bg-jcfs-blue-primary hover:bg-jcfs-blue-dark font-bold text-sm">
              ${t.seeDetail}
            </a>
          </td>
        `;
        rows.appendChild(tr);
      });
    }

    function appendLang(url, lang) {
      try {
        const u = new URL(url, location.origin);
        u.searchParams.set("lang", lang);
        return u.pathname + u.search;
      } catch {
        // 相対パス想定
        const hasQuery = url.includes("?");
        return url + (hasQuery ? "&" : "?") + "lang=" + lang;
      }
    }

    // 初期化
    document.addEventListener("DOMContentLoaded", () => {
      document.getElementById("lang-ja").addEventListener("click", () => setLang("ja"));
      document.getElementById("lang-en").addEventListener("click", () => setLang("en"));
      const initLang = getInitialLang();
      setLang(initLang, { persist:true, updateUrl:true });
    });
  </script>
</body>
</html>
